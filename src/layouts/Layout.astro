---
/**
 * Layout tipo "hero" con:
 *  - Cabecera mínima (sólo botón de tema arriba derecha)
 *  - Hero centrado vertical/horizontal
 *  - Pie de página
 *  - Tailwind + shadcn (CLI "shadcn")
 */
import { Button } from "@/components/ui/button";
import "../styles/global.css";
import { ModeToggle } from '@/components/ModeToggle';
const {
  title = "Mi sitio",
  description = "Hero centrado • 1 columna • Tailwind + shadcn • Accesible"
} = Astro.props;
---

<!doctype html>
<html lang="es" class="h-full antialiased">
  <head>
	<link rel="icon" href="/favicon.png" sizes="any">
    <meta charset="utf-8" />
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300..700;1,300..700&family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet"><link
    href="https://cdn.fontshare.com/css?f[]=satoshi@400,500,700&display=swap"
    rel="stylesheet"
  >
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta name="description" content={description} />
    <title>{title}</title>

    <!-- Aplica tema antes del pintado para evitar FOUC -->
    <script is:inline>
      (() => {
        try {
          const saved = localStorage.getItem("theme");
          const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
          const theme = saved ?? (prefersDark ? "dark" : "light");
          if (theme === "dark") document.documentElement.classList.add("dark");
        } catch {}
      })();
    </script>
  </head>

  <!-- Tres filas: header | main (ocupa todo) | footer -->
  <body class="min-h-svh grid grid-rows-[auto_1fr_auto] bg-white text-slate-900 dark:bg-slate-900 dark:text-slate-100">
    <!-- HEADER: botón de tema arriba derecha -->
    <header class="relative z-10">
      <div class="mx-auto max-w-screen-xl px-4 py-3">
        <div class="flex items-center justify-end">
<Button variant="default">
  <a href="/porque">por qué</a>
</Button>

        </div>
      </div>
    </header>

    <!-- MAIN: hero centrado absoluta y completamente -->
    <main class="relative">
      <section
        class="mx-auto max-w-screen-xl px-4
               min-h-[calc(100svh-56px-60px)] /* alto total menos header (~56px) y footer (~60px) */
               grid place-items-top"
        aria-labelledby="hero-title"
      >
        <div class="w-full text-center">
          <slot />
        </div>
      </section>
    </main>

    <!-- FOOTER -->
    <footer>
      <div class="mx-auto max-w-2xl px-4 py-4 text-center text-md text-slate-900 dark:text-slate-400 mt-10">
    	  <span class="italic "> Toda la información utilizada procede exclusivamente de fuentes públicas y se emplea con una finalidad estrictamente orientada a la participación ciudadana, sin ningún propósito comercial ni de explotación de datos.</span>
        <br /><br /> por  <a target="_blank" class="underline font-bold" href="https://www.avelrom.es/about">avelrom</a>
      </div>
    </footer>

    <!-- Script accesible para alternar tema -->
    <script is:inline>
      (() => {
        const btn = document.getElementById("theme-toggle");
        if (!btn) return;

        const applyAria = () => {
          const isDark = document.documentElement.classList.contains("dark");
          btn.setAttribute("aria-pressed", String(isDark));
          btn.setAttribute("aria-label", isDark ? "Cambiar a modo claro" : "Cambiar a modo oscuro");
        };

        const toggleTheme = () => {
          const nowDark = document.documentElement.classList.toggle("dark");
          try { localStorage.setItem("theme", nowDark ? "dark" : "light"); } catch {}
          applyAria();
        };

        applyAria();
        btn.addEventListener("click", toggleTheme);
      })();
    </script>
  </body>
</html>